<!-- home.html -->
<div class="home-container">
  <div *ngIf="loading" class="loading">
    <p>🔄 Cargando precios...</p>
  </div>

  <div *ngIf="!loading && tokens.length > 0" class="purchase-form">
    <!-- Selector de token -->
    <div class="form-group">
      <label>Selecciona el token:</label>
      <select [(ngModel)]="selectedToken" (change)="onTokenChange()">
        <option *ngFor="let token of tokens" [value]="token.symbol">
          {{ token.name }} ({{ token.symbol }}) - ${{ token.current_price | number:'1.2-2' }}
        </option>
      </select>
    </div>

    <!-- Cantidad a comprar -->
    <div class="form-group">
      <label>Cantidad a comprar:</label>
      <input 
        type="number" 
        [(ngModel)]="amount" 
        (input)="onAmountChange()"
        placeholder="0.00"
        step="0.001"
        min="0.001"
      >
    </div>

    <!-- Resumen de la compra -->
    <div class="summary" *ngIf="amount > 0">
      <h3>Resumen de compra:</h3>
      <p><strong>{{ amount }} {{ selectedToken }}</strong> = <strong>${{ totalAmount | number:'1.2-2' }}</strong></p>
      <p>Recibirás: <strong>{{ receivedTokens | number:'1.0-2' }} MyTokens</strong></p>
    </div>

    <!-- Botones de acción -->
    <div class="actions">
      <button 
        (click)="initiatePurchase()" 
        [disabled]="amount <= 0 || !selectedToken"
        class="btn-primary">
        🛒 Iniciar Compra
      </button>

      <button 
        (click)="goToPay()" 
        class="btn-secondary">
        💳 Ir a Métodos de Pago
      </button>

      <button (click)="refreshPrices()" class="btn-refresh">
        🔄 Actualizar Precios
      </button>
    </div>
  </div>

  <div *ngIf="!loading && tokens.length === 0" class="error">
    <p>❌ No se pudieron cargar los precios. Intenta nuevamente.</p>
    <button (click)="refreshPrices()">Reintentar</button>
  </div>
</div>